<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head lang="en">
    <title th:text="#{pages.secure.chronicle.home.title}">Page Title</title>
    <!--/*/ <th:block th:include="/layout/layout/inc_scripts :: header"></th:block> /*/-->
    <!--/*/ <th:block th:include="/layout/layout/inc_scripts :: ckeditor"></th:block> /*/-->
</head>
<body>
<!--/*/ <th:block th:include="/layout/layout/inc_navs :: chronav"></th:block> /*/-->
<div class="container-fluid">
    <h1>WRITE MESSAGE</h1>
    <div class="row">
        <div class="col-sm-3">
            <!--/* LEFT SECTION */-->
            <div class="row">
                <div class="col">
                    <!--/*/ <th:block th:include="/layout/components/character :: characterSmall"></th:block> /*/-->
                </div>
            </div>
            <div class="row mt-2">
                <div class="col">
                    <!--/* PLACEHOLDER */-->

                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <!--/* CENTER SECTION */-->
            <!--/*@thymesVar id="newMessage" type="org.libermundi.theorcs.forms.MessageForm"*/-->
            <form th:object="${newMessage}" th:action="@{'/secure/chronicle/' + ${_chronicle.id} + '/messaging/send'}" method="post" enctype="application/x-www-form-urlencoded">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div class="form-group row">
                    <label th:for="from" th:text="#{pages.secure.chronicle.messaging.write.form.from}" class="col-2 col-form-label">From</label>
                    <div class="col-10">
                        <select class="form-control" th:field="*{from}">
                            <option th:each="aCharacter : ${characterList}"
                                    th:value="${aCharacter.id}"
                                    th:text="${aCharacter.name}">Character's Name</option>
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label th:for="to" th:text="#{pages.secure.chronicle.messaging.write.form.to}" class="col-2 col-form-label">To</label>
                    <div class="col-10">
                        <select class="form-control" th:field="*{to}">
                            <option th:each="aContact : ${contactList}"
                                    th:value="${aContact.id}"
                                    th:text="${aContact.name}">Contact's Name</option>
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label th:for="subject" th:text="#{pages.secure.chronicle.messaging.write.form.subject}" class="col-2 col-form-label">Subject</label>
                    <div class="col-10">
                        <input type="text" th:field="*{subject}" class="form-control" th:placeholder="#{pages.secure.chronicle.messaging.write.form.subject_placeholder}"
                               th:classappend="${(#fields.hasErrors('subject'))? 'is-invalid':''}" required aria-describedby="helpSubject"/>
                        <small id="helpSubject" class="text-muted" th:unless="${#fields.hasErrors('subject')}" th:text="#{pages.secure.chronicle.messaging.write.form.subject_help}">Indicate the subject of the message</small>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('subject')}">
                            <ul>
                                <li th:each="error : ${#fields.errors('subject')}" th:text="${error}"/>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <label th:for="content" th:text="#{pages.secure.chronicle.messaging.write.form.content}" class="col-2 col-form-label">Content</label>
                    <div class="col-10">
                        <textarea th:field="*{content}" class="form-control" th:classappend="${(#fields.hasErrors('content'))? 'is-invalid':''}" required aria-describedby="helpContent"></textarea>
                        <small id="helpContent" class="text-muted" th:unless="${#fields.hasErrors('content')}" th:text="#{pages.secure.chronicle.messaging.write.form.content_help}">The content of your Message</small>
                        <div class="invalid-feedback" th:if="${#fields.hasErrors('content')}">
                            <ul>
                                <li th:each="error : ${#fields.errors('content')}" th:text="${error}"/>
                            </ul>
                        </div>
                    </div>
                    <script>
                        CKEDITOR.replace('content');
                    </script>
                </div>
                <fieldset class="form-group">
                    <div class="row">
                        <legend class="col-form-label col-sm-2 pt-0" th:text="#{pages.secure.chronicle.messaging.write.form.anonymous}">Anonymous</legend>
                        <div class="col-sm-10">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" th:field="*{anonymous}" value="true" checked>
                                <label class="form-check-label" th:for="anonymous" th:text="#{forms.yes}">
                                    Yes
                                </label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" th:field="*{anonymous}" value="false">
                                <label class="form-check-label" th:for="anonymous" th:text="#{forms.no}">
                                    No
                                </label>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="form-group">
                    <div class="row">
                        <legend class="col-form-label col-sm-2 pt-0" th:text="#{pages.secure.chronicle.messaging.write.form.signature}">Signature</legend>
                        <div class="col-sm-10">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" th:field="*{signature}" value="true" checked>
                                <label class="form-check-label" th:for="signature" th:text="#{forms.yes}">
                                    Yes
                                </label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" th:field="*{signature}" value="false">
                                <label class="form-check-label" th:for="signature" th:text="#{forms.no}">
                                    No
                                </label>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <div class="form-group row">
                    <div class="col-2"></div>
                    <div class="col-10">
                        <button type="submit" class="btn btn-primary" th:text="#{actions.send}">Send</button>
                        <a class="btn btn-danger ml-2" th:text="#{actions.cancel}" th:href="@{'/secure/chronicle/' + ${_chronicle.id}}">Cancel</a>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-sm-3">
            <!--/* RIGHT SECTION */-->
            <div class="row">
                <div class="col">
                    <!--/*/ <th:block th:include="/layout/layout/inc_components :: newslist"></th:block> /*/-->
                </div>
            </div>
            <div class="row mt-2">
                <div class="col">
                    <!--/* PLACEHOLDER */-->
                </div>
            </div>
        </div>
    </div>
</div>

<!--/*/ <th:block th:include="/layout/layout/inc_navs :: footer"></th:block> /*/-->

<!--/*/ <th:block th:include="/layout/layout/inc_scripts :: footer"></th:block> /*/-->

<script>
    var $j = jQuery.noConflict();
    $j(function () {
        $j('#anonymous1,#anonymous2').change(function () {
            if ($j('#anonymous1').is(':checked')) {
                $j('#signature2').prop('checked',true);
            }
        });
        $j('#signature1,#signature2').change(function () {
            if ($j('#signature1').is(':checked')) {
                $j('#anonymous2').prop('checked',true);
            }
        });
    });
</script>
</body>
</html>